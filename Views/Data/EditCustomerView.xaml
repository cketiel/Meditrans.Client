<Window x:Class="Meditrans.Client.Views.Data.EditCustomerView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Meditrans.Client.Views.Data"
        xmlns:vm="clr-namespace:Meditrans.Client.ViewModels"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        mc:Ignorable="d"
        Title="Edit Customer" Height="Auto" Width="600"
        SizeToContent="Height"
        WindowStartupLocation="CenterScreen"
        d:DataContext="{d:DesignInstance vm:EditCustomerViewModel}">

    <Grid Margin="16">
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- Contenedor Principal con Pestañas -->
        <TabControl Grid.Row="0" Style="{StaticResource MaterialDesignFilledTabControl}">

            <!-- Pestaña 1: Información General del Cliente -->
            <TabItem Header="Customer">
                <!-- Usamos un ScrollViewer por si el contenido excede la altura de la ventana -->
                <ScrollViewer VerticalScrollBarVisibility="Auto" Margin="0,10,0,0">
                    <StackPanel Margin="10">

                        <TextBox Margin="0,8"
                                 materialDesign:HintAssist.Hint="Full Name"
                                 Text="{Binding CustomerToEdit.FullName, UpdateSourceTrigger=PropertyChanged}" />

                        <TextBox Margin="0,8"
                                 materialDesign:HintAssist.Hint="Phone"
                                 Text="{Binding CustomerToEdit.Phone, UpdateSourceTrigger=PropertyChanged}" />

                        <TextBox Margin="0,8"
                                 materialDesign:HintAssist.Hint="Mobile Phone"
                                 Text="{Binding CustomerToEdit.MobilePhone, UpdateSourceTrigger=PropertyChanged}" />

                        <TextBox Margin="0,8"
                                 materialDesign:HintAssist.Hint="Client Code"
                                 Text="{Binding CustomerToEdit.ClientCode, UpdateSourceTrigger=PropertyChanged}" />

                        <TextBox Margin="0,8"
                                 materialDesign:HintAssist.Hint="Policy Number"
                                 Text="{Binding CustomerToEdit.PolicyNumber, UpdateSourceTrigger=PropertyChanged}" />

                        <TextBox Margin="0,8"
                                 materialDesign:HintAssist.Hint="Email"
                                 Text="{Binding CustomerToEdit.Email, UpdateSourceTrigger=PropertyChanged}" />

                        <DatePicker Margin="0,8"
                                    materialDesign:HintAssist.Hint="Date of Birth"
                                    SelectedDate="{Binding CustomerToEdit.DOB}"
                                    Style="{StaticResource MaterialDesignFilledDatePicker}" />

                        <ComboBox Margin="0,8"
                                  materialDesign:HintAssist.Hint="Gender" 
                                  ItemsSource="{Binding Genders}"
                                  SelectedItem="{Binding CustomerToEdit.Gender, Mode=TwoWay}"
                                  Style="{StaticResource MaterialDesignFilledComboBox}" />

                        <ComboBox Margin="0,8"
                                  materialDesign:HintAssist.Hint="Funding Source" 
                                  ItemsSource="{Binding FundingSources}"
                                  SelectedItem="{Binding CustomerToEdit.FundingSource, Mode=TwoWay}"
                                  DisplayMemberPath="Name"
                                  Style="{StaticResource MaterialDesignFilledComboBox}" />

                        <ComboBox Margin="0,8"
                                  materialDesign:HintAssist.Hint="Space Type" 
                                  ItemsSource="{Binding SpaceTypes}"
                                  SelectedItem="{Binding CustomerToEdit.SpaceType, Mode=TwoWay}"
                                  DisplayMemberPath="Name"
                                  Style="{StaticResource MaterialDesignFilledComboBox}" />
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- Pestaña 2: Dirección del Domicilio -->
            <TabItem Header="Home Address">
                <StackPanel Margin="10" >
                    <TextBox Margin="0,8"
                             materialDesign:HintAssist.Hint="Address"
                             Text="{Binding CustomerToEdit.Address, UpdateSourceTrigger=PropertyChanged}" />

                    <TextBox Margin="0,8"
                             materialDesign:HintAssist.Hint="City"
                             Text="{Binding CustomerToEdit.City, UpdateSourceTrigger=PropertyChanged}" />

                    <TextBox Margin="0,8"
                             materialDesign:HintAssist.Hint="State"
                             Text="{Binding CustomerToEdit.State, UpdateSourceTrigger=PropertyChanged}" />

                    <TextBox Margin="0,8"
                             materialDesign:HintAssist.Hint="Zip Code"
                             Text="{Binding CustomerToEdit.Zip, UpdateSourceTrigger=PropertyChanged}" />
                </StackPanel>
            </TabItem>
        </TabControl>

        <!-- Botones de Acción (Guardar y Cancelar) -->
        <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,20,0,0">
            <Button Content="SAVE"
                    IsDefault="True"
                    Click="SaveButton_Click"
                    Style="{StaticResource MaterialDesignRaisedButton}"
                    Margin="0,0,10,0"/>

            <Button Content="CANCEL"
                    IsCancel="True"
                    Style="{StaticResource MaterialDesignOutlinedButton}"/>
        </StackPanel>
    </Grid>
</Window>